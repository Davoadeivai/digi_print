#!/bin/bash

# Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ ØªØ±Ù…ÛŒÙ†Ø§Ù„
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${YELLOW}ğŸš€ Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ...${NC}"

# Ù†ØµØ¨ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§
echo -e "\nğŸ“¦ Ø¯Ø± Ø­Ø§Ù„ Ù†ØµØ¨ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§..."
npm install
if [ $? -ne 0 ]; then
    echo -e "${RED}âŒ Ø®Ø·Ø§ Ø¯Ø± Ù†ØµØ¨ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§${NC}"
    exit 1
fi

# Ø³Ø§Ø®Øª Ù†Ø³Ø®Ù‡ ØªÙˆÙ„ÛŒØ¯ÛŒ
echo -e "\nğŸ”¨ Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ø®Øª Ù†Ø³Ø®Ù‡ ØªÙˆÙ„ÛŒØ¯ÛŒ..."
npm run build
if [ $? -ne 0 ]; then
    echo -e "${RED}âŒ Ø®Ø·Ø§ Ø¯Ø± Ø³Ø§Ø®Øª Ù†Ø³Ø®Ù‡ ØªÙˆÙ„ÛŒØ¯ÛŒ${NC}"
    exit 1
fi

# Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
echo -e "\nâœ… ${GREEN}Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯!${NC}"
echo -e "\nğŸ“‚ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ Ø¯Ø± Ù¾ÙˆØ´Ù‡ ${YELLOW}dist/${NC} Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ù†Ø¯."

# Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ
echo -e "\nğŸŒ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ:"
echo "1. Ø§Ø¬Ø±Ø§ÛŒ Ù„ÙˆÚ©Ø§Ù„ (Ø¨Ø±Ø§ÛŒ ØªØ³Øª)"
echo "2. Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ø±ÙˆÛŒ Vercel (ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡)"
echo "3. Ø®Ø±ÙˆØ¬"

read -p "Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ (1-3): " choice

case $choice in
    1)
        echo -e "\nğŸš€ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ÛŒ Ø³Ø±ÙˆØ± ØªÙˆØ³Ø¹Ù‡..."
        npm run dev
        ;;
    2)
        echo -e "\nâ˜ï¸  Ø¯Ø± Ø­Ø§Ù„ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ø±ÙˆÛŒ Vercel..."
        if ! command -v vercel &> /dev/null; then
            echo -e "${YELLOW}âš ï¸  Vercel CLI Ù†ØµØ¨ Ù†ÛŒØ³Øª. Ø¯Ø± Ø­Ø§Ù„ Ù†ØµØ¨...${NC}"
            npm install -g vercel
        fi
        vercel --prod
        ;;
    *)
        echo -e "\nğŸ‘‹ Ø®Ø¯Ø§Ø­Ø§ÙØ¸!"
        exit 0
        ;;
esac
